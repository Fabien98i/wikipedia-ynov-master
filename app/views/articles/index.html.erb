<p id="notice"><%= notice %></p>

<h1>List of Articles :</h1>

<table class="table table-striped">
    <thead>
        <tr>
            <th></th>
            <th>Username</th>
            <th>Title</th>
            <th>Content</th>
            <th>Information</th>
            <th colspan="3"></th>
        </tr>
    </thead>

    <tbody>
        <% @articles.each do |article| %>
        <tr>
            <td><%= image_tag article.image_url, height: 100 %></td>
            <td><%= article.title %></td>
            <td><%= markdown(article.content) %></td>
            <td>Edited by : <%= article.user.name %></td>
            <td><%= link_to 'About this article', content_show_path(article) %> </td>
            <td><%= link_to 'Edit', edit_article_path(article) %></td>
            <td><%= link_to 'Destroy', article, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>

        <tr>
            <th> - - COMMENTS : </th>
            <th><%= link_to 'New Comments', new_comment_path(article.id) %> </th>
        </tr>

        <% @comments = Comment.where(article_id: article.id) %>
        <% @comments.each do |comment| %>
          <tr> 
            <td> <%= comment.created_at.strftime('%d-%m-%Y') %> </td>
            <td> <%= comment.comment %> </td>
            <td> Edited by : <%= comment.user.username %> </td>
          </tr>
        <% end %>


        <% end %>
    </tbody>
</table>

<br>

<%= link_to 'CrÃ©er un article', new_article_path %>
<%= link_to 'Show all contents', contents_path(@article) %>